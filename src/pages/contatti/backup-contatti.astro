---
import Layout from "../../layouts/Layout.astro";

// SEO Data
const seoData = {
  title: "Info e Prenotazioni - Ristorante TRE Grill + Pizzeria",
  description: "Trova tutte le info utili per prenotare un tavolo online, ordinare d' asporto o richiedere un preventivo per il tuo evento personalizzato.",
  canonical: "https://www.ristorantepizzeriatre.it/contatti/",
  ogImage: "https://www.ristorantepizzeriatre.it/img/contatti/prenota-tavolo-ristorante-pizzeria-tre-merate-contatti.webp",
  preloadImage: "/img/contatti/prenota-tavolo-ristorante-pizzeria-tre-merate-contatti.webp",
};

// Schema.org per ContactPage + BreadcrumbList
const schemaOrg = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "ContactPage",
      "@id": "https://www.ristorantepizzeriatre.it/contatti/#contactpage",
      "name": "Contatti - Ristorante Pizzeria TRE",
      "description": "Pagina contatti del Ristorante Pizzeria TRE a Merate. Prenota un tavolo, richiedi informazioni o un preventivo per eventi.",
      "url": "https://www.ristorantepizzeriatre.it/contatti/",
      "mainEntity": {
        "@id": "https://www.ristorantepizzeriatre.it/#restaurant"
      }
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://www.ristorantepizzeriatre.it/contatti/#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://www.ristorantepizzeriatre.it/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Contatti",
          "item": "https://www.ristorantepizzeriatre.it/contatti/"
        }
      ]
    },
    {
      "@type": "WebPage",
      "@id": "https://www.ristorantepizzeriatre.it/contatti/#webpage",
      "url": "https://www.ristorantepizzeriatre.it/contatti/",
      "name": "Info e Prenotazioni | Ristorante Pizzeria TRE Merate",
      "isPartOf": {
        "@id": "https://www.ristorantepizzeriatre.it/#website"
      },
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "https://www.ristorantepizzeriatre.it/img/contatti/prenota-tavolo-ristorante-pizzeria-tre-merate-contatti.webp"
      },
      "breadcrumb": {
        "@id": "https://www.ristorantepizzeriatre.it/contatti/#breadcrumb"
      },
      "inLanguage": "it-IT"
    }
  ]
};
---

<Layout 
  title={seoData.title}
  description={seoData.description}
  canonical={seoData.canonical}
  ogImage={seoData.ogImage}
  preloadImage={seoData.preloadImage}
>
  <!-- Schema.org JSON-LD -->
  <Fragment slot="schema">
    <script type="application/ld+json" set:html={JSON.stringify(schemaOrg)} />
  </Fragment>

  <!-- Hero Section -->
  <section class="hero hero-contatti">
    <div class="container hero-content">
      <h1>Contattaci per Informazioni<br />e Prenotazioni</h1>
      <p>
        Siamo qui per aiutarti. Prenota il tuo tavolo o contattaci<br />
        per informazioni e preventivi per i tuoi eventi.
      </p>
      <div class="hero-buttons">
        <a href="#prenota-tavolo" class="btn btn-primary">Prenota un Tavolo</a>
        <a href="#preventivo" class="btn btn-outline">Richiedi Informazioni</a>
      </div>
    </div>
  </section>

  <!-- Breadcrumb -->
  <nav class="breadcrumb-nav" aria-label="Breadcrumb">
    <div class="container">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li aria-current="page">Contatti</li>
      </ol>
    </div>
  </nav>

  <!-- Orari di Apertura -->
  <section class="orari-section">
    <div class="container">
      <div class="orari-box">
        <h2>Orari di Apertura</h2>
        <p class="orari-intro">Consulta i nostri orari di apertura per programmare al meglio la tua visita</p>
        <div class="orari-grid">
          <div class="orari-item">
            <span class="orari-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </span>
            <div class="orari-text">
              <strong>Lunedì - Venerdì:</strong>
              <span>12:00 - 14:30 | 19:00 - 23:00</span>
            </div>
          </div>
          <div class="orari-item">
            <span class="orari-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </span>
            <div class="orari-text">
              <strong>Sabato - Domenica:</strong>
              <span>19:00 - 23:00</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Menu Secondario Sticky -->
  <nav class="submenu-sticky" id="submenu-sticky">
    <div class="container">
      <ul class="submenu-list">
        <li><a href="#prenota-tavolo" class="submenu-link active">Prenota Online</a></li>
        <li><a href="#contatti-rapidi" class="submenu-link">Contatti Rapidi</a></li>
        <li><a href="#asporto" class="submenu-link">Asporto</a></li>
        <li><a href="#preventivo" class="submenu-link">Preventivi</a></li>
        <li><a href="#mappa" class="submenu-link">Mappa</a></li>
      </ul>
    </div>
  </nav>

  <!-- Prenota il Tavolo Online - CON COMING SOON -->
  <section class="contact-section" id="prenota-tavolo">
    <div class="container">
      <div class="contact-grid">
        <div class="contact-content">
          <h2>Prenota il Tavolo Online</h2>
          <p class="contact-intro">
            Prenota il tuo tavolo direttamente online e scegli la data e l'orario che preferisci. 
            Riceverai una conferma immediata e il nostro staff sarà pronto ad accoglierti.
          </p>
          <p class="contact-note">
            Per le prenotazioni di eventi speciali (lauree, compleanni, cresime,...) 
            <a href="#preventivo">contattaci per ricevere un preventivo cliccando qui</a>
          </p>

          <!-- Booking Widget con Coming Soon Overlay -->
          <div class="booking-widget-wrapper">
            <div class="booking-widget booking-widget-disabled">
              <h3>Seleziona il Numero di Ospiti</h3>
              <div class="guest-grid">
                <button class="guest-btn" data-guests="1" disabled>1</button>
                <button class="guest-btn" data-guests="2" disabled>2</button>
                <button class="guest-btn" data-guests="3" disabled>3</button>
                <button class="guest-btn" data-guests="4" disabled>4</button>
                <button class="guest-btn" data-guests="5" disabled>5</button>
                <button class="guest-btn" data-guests="6" disabled>6</button>
                <button class="guest-btn" data-guests="7" disabled>7</button>
                <button class="guest-btn" data-guests="8" disabled>8</button>
              </div>
              <p class="guest-note">
                Per gruppi superiori a 8 persone
                <a href="#preventivo">Contattaci qui</a>
              </p>
            </div>
            <!-- Coming Soon Overlay -->
            <div class="coming-soon-overlay">
              <div class="coming-soon-content">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <h4>Coming Soon</h4>
                <p>La prenotazione online sarà disponibile a breve!</p>
                <p class="coming-soon-alternative">Nel frattempo, <a href="#contatti-rapidi">contattaci telefonicamente</a></p>
              </div>
            </div>
          </div>
        </div>
        <div class="contact-image">
          <img 
            src="/img/contatti/prenota-tavolo-ristorante-pizzeria-tre-merate-contatti.webp" 
            alt="Prenota il tuo tavolo al Ristorante TRE Merate"
            loading="lazy"
            decoding="async"
            width="600"
            height="450"
          />
        </div>
      </div>
    </div>
  </section>

  <div class="section-divider"></div>

  <!-- Contatti Rapidi -->
  <section class="contact-section contact-section-alt" id="contatti-rapidi">
    <div class="container">
      <div class="contact-grid contact-grid-reverse">
        <div class="contact-image">
          <img 
            src="/img/contatti/contatti-rapidi-ristorante-pizzeria-tre-merate.webp" 
            alt="Contattaci - Ristorante TRE Merate"
            loading="lazy"
            decoding="async"
            width="600"
            height="450"
          />
        </div>
        <div class="contact-content">
          <h2>Contatti Rapidi<br />per info e prenotazioni</h2>
          <p class="contact-intro">
            Hai bisogno di risposte rapide? Contattaci direttamente via telefono o 
            WhatsApp per qualsiasi informazione.
          </p>
          <div class="contact-buttons">
            <a href="tel:+390399909913" class="btn btn-primary btn-contact">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Chiama Ora
            </a>
            <a href="https://wa.me/393517701704" target="_blank" rel="noopener" class="btn btn-whatsapp btn-contact">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L0 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
              </svg>
              WhatsApp
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="section-divider"></div>

  <!-- Ordina Online d'Asporto - CON COMING SOON -->
  <section class="contact-section" id="asporto">
    <div class="container">
      <div class="contact-grid">
        <div class="contact-content">
          <h2>Ordina Online i Tuoi<br />Piatti d'Asporto</h2>
          <p class="contact-intro">
            Ordina online e ritira i tuoi piatti preferiti. Scegli il tuo menù e ritira 
            all'orario che preferisci.
          </p>
          
          <!-- Coming Soon Box per Asporto -->
          <div class="asporto-coming-soon">
            <div class="asporto-coming-soon-icon">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                <path d="M2 17l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <h4>Ordini Online in Arrivo!</h4>
            <p>Stiamo lavorando per offrirti un servizio d'asporto online comodo e veloce.</p>
            <p class="asporto-coming-soon-note">Nel frattempo, puoi ordinare chiamandoci al <a href="tel:+390399909913">039 990 9913</a></p>
          </div>

          <div class="asporto-steps asporto-steps-faded">
            <div class="asporto-step">
              <span class="asporto-step-number">1</span>
              <span class="asporto-step-text">Scegli i Piatti</span>
            </div>
            <div class="asporto-step">
              <span class="asporto-step-number">2</span>
              <span class="asporto-step-text">Scegli l'Orario</span>
            </div>
            <div class="asporto-step">
              <span class="asporto-step-number">3</span>
              <span class="asporto-step-text">Paga Online</span>
            </div>
            <div class="asporto-step">
              <span class="asporto-step-number">4</span>
              <span class="asporto-step-text">Vieni e Ritira</span>
            </div>
          </div>
        </div>
        <div class="contact-image">
          <img 
            src="/img/contatti/menu-asporto-ristorante-pizzeria-tre-merate-ordina-ora.webp" 
            alt="Ordina d'asporto - Ristorante TRE Merate"
            loading="lazy"
            decoding="async"
            width="600"
            height="450"
          />
        </div>
      </div>
    </div>
  </section>

  <div class="section-divider"></div>

  <!-- Richiedi un Preventivo Personalizzato -->
  <section class="preventivo-section" id="preventivo">
    <div class="container">
      <div class="section-header">
        <h2>Richiedi un Preventivo Personalizzato</h2>
        <p>Compila il modulo per ricevere un preventivo su misura per il tuo evento speciale</p>
      </div>

      <div class="preventivo-form-container">
        <form id="preventivo-form" class="preventivo-form">
          <p class="form-required-note">(*) campi obbligatori</p>
          
          <div class="form-row">
            <div class="form-group">
              <label for="evento">Evento*</label>
              <select id="evento" name="evento" required>
                <option value="">Seleziona tipo di evento</option>
                <option value="compleanno">Compleanno</option>
                <option value="battesimo">Battesimo</option>
                <option value="comunione">Comunione</option>
                <option value="cresima">Cresima</option>
                <option value="laurea">Laurea</option>
                <option value="anniversario">Anniversario</option>
                <option value="meeting">Meeting / Cena Aziendale</option>
                <option value="altro">Altro</option>
              </select>
            </div>
          </div>

          <div class="form-row form-row-2">
            <div class="form-group">
              <label for="data">Data*</label>
              <input type="date" id="data" name="data" required />
              <label class="checkbox-inline">
                <input type="checkbox" id="data-da-definire" name="data-da-definire" />
                <span>Data da definire</span>
              </label>
            </div>
            <div class="form-group">
              <label for="servizio">Servizio*</label>
              <select id="servizio" name="servizio" required>
                <option value="">Seleziona</option>
                <option value="pranzo">Pranzo</option>
                <option value="cena">Cena</option>
              </select>
            </div>
          </div>

          <div class="form-row form-row-2">
            <div class="form-group">
              <label for="nome">Nome*</label>
              <input type="text" id="nome" name="nome" required placeholder="Il tuo nome" />
            </div>
            <div class="form-group">
              <label for="cognome">Cognome*</label>
              <input type="text" id="cognome" name="cognome" required placeholder="Il tuo cognome" />
            </div>
          </div>

          <div class="form-row form-row-2">
            <div class="form-group">
              <label for="partecipanti">Numero Partecipanti*</label>
              <input type="number" id="partecipanti" name="partecipanti" min="1" placeholder="Inserisci numero" />
              <label class="checkbox-inline">
                <input type="checkbox" id="numero-da-definire" name="numero-da-definire" />
                <span>Numero da definire</span>
              </label>
            </div>
            <div class="form-group">
              <label for="telefono">Telefono</label>
              <input type="tel" id="telefono" name="telefono" placeholder="Il tuo numero di telefono" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email">Email*</label>
              <input type="email" id="email" name="email" required placeholder="La tua email" />
            </div>
          </div>

          <!-- Anteprima Oggetto Email -->
          <div class="form-row">
            <div class="email-preview-box">
              <div class="email-preview-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Oggetto Email (generato automaticamente)</span>
              </div>
              <div class="email-preview-content" id="oggetto-preview">
                Richiesta Preventivo: [Evento] - [Data] - [Servizio] - [N° Persone]
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="messaggio">Messaggio</label>
              <textarea id="messaggio" name="messaggio" rows="5" placeholder="Scrivi qui il tuo messaggio o richieste particolari..."></textarea>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="checkbox-privacy">
                <input type="checkbox" id="privacy" name="privacy" required />
                <span>
                  Ai sensi e per gli effetti degli articoli 7, 13 e 23 del D.Lgs. n. 196/2003, dichiaro di aver preso visione 
                  dell'<a href="/privacy-policy/" target="_blank">informativa</a> di Ristorante Pizzeria TRE Srl per il trattamento dei dati personali.
                </span>
              </label>
            </div>
          </div>

          <div class="form-row form-submit">
            <button type="submit" class="btn btn-primary btn-submit">Richiedi Preventivo</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <div class="section-divider"></div>

  <!-- Come Raggiungerci / Mappa -->
  <section class="mappa-section" id="mappa">
    <div class="container">
      <div class="section-header">
        <h2>Come Raggiungerci</h2>
        <p>Via Statale, 44, 23807 Merate LC</p>
      </div>

      <div class="mappa-container">
        <iframe 
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2790.4789132738!2d9.415541776890889!3d45.69830297108203!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4786a3e3a8f7d9e3%3A0x1234567890abcdef!2sVia%20Statale%2C%2044%2C%2023807%20Merate%20LC!5e0!3m2!1sit!2sit!4v1700000000000!5m2!1sit!2sit"
          width="100%" 
          height="450" 
          style="border:0;" 
          allowfullscreen="" 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade"
          title="Mappa Ristorante Pizzeria TRE Merate"
        ></iframe>
      </div>
    </div>
  </section>

  <div class="section-divider"></div>
</Layout>

<style>
  /* Hero Contatti - Con background-position: top per non tagliare la faccia */
  .hero-contatti {
    background-image:
      linear-gradient(rgba(0, 0, 0, 0.62), rgba(0, 0, 0, 0.62)),
      url('/img/contatti/prenota-tavolo-ristorante-pizzeria-tre-merate-contatti.webp');
    background-position: top center;
  }

  /* Orari Section */
  .orari-section {
    padding: 3rem 0;
    background-color: var(--bg-light);
  }

  .orari-box {
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
  }

  .orari-box h2 {
    font-size: 32px;
    line-height: 40px;
    margin-bottom: 0.5rem;
    color: var(--text-dark);
  }

  .orari-intro {
    font-size: 18px;
    line-height: 26px;
    color: var(--text-dark);
    opacity: 0.8;
    margin-bottom: 2rem;
  }

  .orari-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 500px;
    margin: 0 auto;
  }

  @media (min-width: 768px) {
    .orari-grid {
      flex-direction: row;
      max-width: 700px;
      gap: 2rem;
    }
  }

  .orari-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    background-color: var(--bg-white);
    border-radius: 8px;
    border-left: 4px solid var(--primary-color);
    flex: 1;
  }

  .orari-icon {
    flex-shrink: 0;
    width: 44px;
    height: 44px;
    background-color: var(--primary-pale);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
  }

  .orari-text {
    text-align: left;
  }

  .orari-text strong {
    display: block;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 0.25rem;
  }

  .orari-text span {
    font-size: 18px;
    color: var(--primary-color);
    font-weight: 600;
  }

  @media (max-width: 768px) {
    .orari-box h2 {
      font-size: 28px;
      line-height: 36px;
    }

    .orari-intro {
      font-size: 16px;
    }
  }

  /* Contact Section */
  .contact-section {
    padding: 4rem 0;
    background-color: var(--bg-white);
    scroll-margin-top: 200px;
  }

  .contact-section-alt {
    background-color: var(--bg-light);
  }

  @media (min-width: 768px) {
    .contact-section {
      padding: 5rem 0;
    }
  }

  @media (min-width: 992px) {
    .contact-section {
      scroll-margin-top: 210px;
    }
  }

  .contact-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 3rem;
    align-items: center;
  }

  @media (min-width: 992px) {
    .contact-grid {
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
    }
  }

  .contact-grid-reverse {
    direction: rtl;
  }

  .contact-grid-reverse > * {
    direction: ltr;
  }

  @media (max-width: 991px) {
    .contact-grid-reverse {
      direction: ltr;
    }

    .contact-grid-reverse .contact-image {
      order: 2;
    }
  }

  .contact-content h2 {
    font-size: 36px;
    line-height: 44px;
    margin-bottom: 1rem;
    color: var(--text-dark);
  }

  .contact-intro {
    font-size: 18px;
    line-height: 28px;
    color: var(--text-dark);
    opacity: 0.85;
    margin-bottom: 1.5rem;
  }

  .contact-note {
    font-size: 16px;
    line-height: 24px;
    color: var(--text-dark);
    opacity: 0.75;
    margin-bottom: 2rem;
    padding: 1rem;
    background-color: var(--bg-light);
    border-radius: 8px;
  }

  .contact-note a {
    color: var(--primary-color);
    font-weight: 600;
    text-decoration: underline;
  }

  .contact-image {
    border-radius: 12px;
    overflow: hidden;
  }

  .contact-image img {
    width: 100%;
    height: auto;
    display: block;
    transition: transform 0.5s ease;
  }

  .contact-image:hover img {
    transform: scale(1.03);
  }

  @media (max-width: 768px) {
    .contact-content h2 {
      font-size: 28px;
      line-height: 36px;
    }

    .contact-intro {
      font-size: 16px;
      line-height: 26px;
    }
  }

  /* Booking Widget Wrapper con Coming Soon Overlay */
  .booking-widget-wrapper {
    position: relative;
    margin-top: 2rem;
  }

  .booking-widget {
    padding: 2rem;
    background-color: var(--bg-light);
    border-radius: 12px;
  }

  .booking-widget-disabled {
    filter: blur(3px);
    pointer-events: none;
    user-select: none;
  }

  .booking-widget h3 {
    font-size: 20px;
    line-height: 28px;
    margin-bottom: 1.5rem;
    color: var(--text-dark);
    text-align: center;
  }

  .guest-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.75rem;
    margin-bottom: 1rem;
  }

  .guest-btn {
    width: 100%;
    aspect-ratio: 1;
    background-color: var(--bg-white);
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 20px;
    font-weight: 600;
    color: var(--text-dark);
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: var(--font-main);
  }

  .guest-btn:hover:not(:disabled) {
    border-color: var(--primary-color);
    color: var(--primary-color);
  }

  .guest-btn.active {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: var(--text-white);
  }

  .guest-note {
    font-size: 14px;
    text-align: center;
    color: var(--text-dark);
    opacity: 0.7;
    margin: 0;
  }

  .guest-note a {
    color: var(--primary-color);
    font-weight: 600;
    text-decoration: underline;
  }

  /* Coming Soon Overlay */
  .coming-soon-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255, 255, 255, 0.92);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }

  .coming-soon-content {
    text-align: center;
    padding: 2rem;
  }

  .coming-soon-content svg {
    color: var(--primary-color);
    margin-bottom: 1rem;
  }

  .coming-soon-content h4 {
    font-size: 28px;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .coming-soon-content p {
    font-size: 18px;
    line-height: 26px;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
  }

  .coming-soon-alternative {
    font-size: 16px;
    color: var(--text-dark);
    opacity: 0.8;
  }

  .coming-soon-alternative a {
    color: var(--primary-color);
    font-weight: 600;
    text-decoration: underline;
  }

  @media (max-width: 768px) {
    .coming-soon-content h4 {
      font-size: 24px;
    }

    .coming-soon-content p {
      font-size: 16px;
    }
  }

  /* Contact Buttons */
  .contact-buttons {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  @media (min-width: 480px) {
    .contact-buttons {
      flex-direction: row;
    }
  }

  .btn-contact {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    min-width: 180px;
  }

  .btn-whatsapp {
    background-color: #25D366;
    border-color: #25D366;
    color: var(--text-white);
  }

  .btn-whatsapp:hover,
  .btn-whatsapp:active,
  .btn-whatsapp:focus-visible {
    background-color: #128C7E;
    border-color: #128C7E;
    color: var(--text-white);
  }

  /* Asporto Coming Soon Box */
  .asporto-coming-soon {
    background: linear-gradient(135deg, var(--bg-light-orange) 0%, var(--primary-pale) 100%);
    border-radius: 12px;
    padding: 2rem;
    text-align: center;
    margin-bottom: 2rem;
    border: 2px dashed var(--primary-color);
  }

  .asporto-coming-soon-icon {
    width: 80px;
    height: 80px;
    background-color: var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.25rem;
    color: var(--text-white);
  }

  .asporto-coming-soon h4 {
    font-size: 26px;
    font-weight: 700;
    color: var(--primary-dark);
    margin-bottom: 0.75rem;
  }

  .asporto-coming-soon p {
    font-size: 18px;
    line-height: 26px;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
  }

  .asporto-coming-soon-note {
    font-size: 16px;
    color: var(--text-dark);
    opacity: 0.85;
  }

  .asporto-coming-soon-note a {
    color: var(--primary-color);
    font-weight: 700;
    text-decoration: underline;
  }

  @media (max-width: 768px) {
    .asporto-coming-soon {
      padding: 1.5rem;
    }

    .asporto-coming-soon-icon {
      width: 60px;
      height: 60px;
    }

    .asporto-coming-soon-icon svg {
      width: 30px;
      height: 30px;
    }

    .asporto-coming-soon h4 {
      font-size: 22px;
    }

    .asporto-coming-soon p {
      font-size: 16px;
    }
  }

  /* Asporto Steps - Faded/Preview */
  .asporto-steps {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-top: 2rem;
  }

  @media (min-width: 768px) {
    .asporto-steps {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .asporto-steps-faded {
    opacity: 0.5;
  }

  .asporto-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem;
    background-color: var(--bg-light);
    border-radius: 8px;
    text-align: center;
  }

  .asporto-step-number {
    width: 36px;
    height: 36px;
    background-color: var(--primary-color);
    color: var(--text-white);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: 700;
  }

  .asporto-step-text {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-dark);
  }

  /* Preventivo Section */
  .preventivo-section {
    padding: 4rem 0;
    background-color: var(--bg-light);
    scroll-margin-top: 200px;
  }

  @media (min-width: 768px) {
    .preventivo-section {
      padding: 5rem 0;
    }
  }

  @media (min-width: 992px) {
    .preventivo-section {
      scroll-margin-top: 210px;
    }
  }

  .preventivo-form-container {
    max-width: 800px;
    margin: 0 auto;
    background-color: var(--bg-white);
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  }

  @media (min-width: 768px) {
    .preventivo-form-container {
      padding: 3rem;
    }
  }

  .preventivo-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .form-required-note {
    font-size: 14px;
    color: var(--text-dark);
    opacity: 0.7;
    margin: 0;
  }

  .form-row {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .form-row-2 {
    flex-direction: column;
  }

  @media (min-width: 768px) {
    .form-row-2 {
      flex-direction: row;
    }

    .form-row-2 .form-group {
      flex: 1;
    }
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .form-group label {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-dark);
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    padding: 0.875rem 1rem;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-family: var(--font-main);
    font-size: 16px;
    color: var(--text-dark);
    transition: border-color 0.3s ease;
    background-color: var(--bg-white);
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--primary-color);
  }

  .form-group select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23333333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    background-size: 20px;
    padding-right: 3rem;
  }

  .form-group textarea {
    resize: vertical;
    min-height: 120px;
  }

  .form-group input:disabled,
  .form-group select:disabled {
    background-color: var(--bg-light);
    opacity: 0.6;
    cursor: not-allowed;
  }

  .checkbox-inline {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
    cursor: pointer;
    font-size: 14px;
    font-weight: 400;
  }

  .checkbox-inline input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--primary-color);
  }

  .checkbox-privacy {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    cursor: pointer;
    font-size: 14px;
    font-weight: 400;
    line-height: 1.5;
  }

  .checkbox-privacy input[type="checkbox"] {
    width: 20px;
    height: 20px;
    margin-top: 2px;
    flex-shrink: 0;
    cursor: pointer;
    accent-color: var(--primary-color);
  }

  .checkbox-privacy a {
    color: var(--primary-color);
    text-decoration: underline;
  }

  .form-submit {
    margin-top: 1rem;
  }

  .btn-submit {
    width: 100%;
    padding: 1rem 2rem;
    font-size: 18px;
  }

  @media (min-width: 768px) {
    .btn-submit {
      width: auto;
      min-width: 250px;
      margin: 0 auto;
      display: block;
    }
  }

  /* Mappa Section */
  .mappa-section {
    padding: 4rem 0;
    background-color: var(--bg-white);
    scroll-margin-top: 200px;
  }

  @media (min-width: 768px) {
    .mappa-section {
      padding: 5rem 0;
    }
  }

  @media (min-width: 992px) {
    .mappa-section {
      scroll-margin-top: 210px;
    }
  }

  .mappa-container {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }

  .mappa-container iframe {
    display: block;
  }

  /* Email Preview Box */
  .email-preview-box {
    width: 100%;
    padding: 1rem 1.25rem;
    background: linear-gradient(135deg, var(--bg-light-orange) 0%, #FFF8F4 100%);
    border: 2px solid var(--primary-light);
    border-radius: 10px;
    transition: all 0.3s ease;
  }

  .email-preview-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 14px;
    font-weight: 600;
    color: var(--primary-dark);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.5rem;
  }

  .email-preview-label svg {
    color: var(--primary-color);
  }

  .email-preview-content {
    font-size: 16px;
    line-height: 24px;
    color: var(--text-dark);
    font-weight: 500;
    word-break: break-word;
  }

  .email-preview-content .placeholder {
    color: var(--text-dark);
    opacity: 0.5;
    font-style: italic;
  }

  @media (max-width: 768px) {
    .email-preview-box {
      padding: 0.875rem 1rem;
    }

    .email-preview-label {
      font-size: 12px;
    }

    .email-preview-content {
      font-size: 14px;
      line-height: 22px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const header = document.getElementById('main-header');
    const submenu = document.getElementById('submenu-sticky');
    const submenuList = document.querySelector('.submenu-list');
    const submenuLinks = document.querySelectorAll('.submenu-link');
    const sections = document.querySelectorAll('.contact-section[id], .preventivo-section[id], .mappa-section[id]');

    // Form elements
    const eventoSelect = document.getElementById('evento');
    const dataInput = document.getElementById('data');
    const dataCheckbox = document.getElementById('data-da-definire');
    const partecipantiInput = document.getElementById('partecipanti');
    const numeroCheckbox = document.getElementById('numero-da-definire');
    const servizioSelect = document.getElementById('servizio');
    const oggettoPreview = document.getElementById('oggetto-preview');

    // Funzione per aggiornare l'anteprima dell'oggetto email
    const updateOggettoPreview = () => {
      if (!oggettoPreview) return;
      
      // Evento
      let eventoText = '[Evento]';
      if (eventoSelect && eventoSelect.value) {
        eventoText = eventoSelect.options[eventoSelect.selectedIndex].text;
      }
      
      // Data
      let dataText = '[Data]';
      if (dataCheckbox && dataCheckbox.checked) {
        dataText = 'Da definire';
      } else if (dataInput && dataInput.value) {
        const d = new Date(dataInput.value);
        dataText = d.toLocaleDateString('it-IT', { day: '2-digit', month: '2-digit', year: 'numeric' });
      }
      
      // Servizio
      let servizioText = '[Servizio]';
      if (servizioSelect && servizioSelect.value) {
        servizioText = servizioSelect.options[servizioSelect.selectedIndex].text;
      }
      
      // Partecipanti
      let partecipantiText = '[N° Persone]';
      if (numeroCheckbox && numeroCheckbox.checked) {
        partecipantiText = 'Da definire';
      } else if (partecipantiInput && partecipantiInput.value) {
        partecipantiText = partecipantiInput.value + ' persone';
      }
      
      // Aggiorna l'anteprima
      oggettoPreview.textContent = `Richiesta Preventivo: ${eventoText} - ${dataText} - ${servizioText} - ${partecipantiText}`;
    };

    // Aggiungi event listener per aggiornamento in tempo reale
    if (eventoSelect) eventoSelect.addEventListener('change', updateOggettoPreview);
    if (dataInput) dataInput.addEventListener('change', updateOggettoPreview);
    if (dataCheckbox) dataCheckbox.addEventListener('change', updateOggettoPreview);
    if (servizioSelect) servizioSelect.addEventListener('change', updateOggettoPreview);
    if (partecipantiInput) partecipantiInput.addEventListener('input', updateOggettoPreview);
    if (numeroCheckbox) numeroCheckbox.addEventListener('change', updateOggettoPreview);

    // Calcola offset totale
    const getOffset = () => {
      const headerHeight = header ? header.offsetHeight : 0;
      const submenuHeight = submenu ? submenu.offsetHeight : 0;
      return headerHeight + submenuHeight + 40;
    };

    // Scrolla il submenu orizzontalmente per mostrare il link attivo
    const scrollSubmenuToActiveLink = (activeLink) => {
      if (!submenuList || !activeLink) return;
      if (window.innerWidth > 768) return;

      const scrollLeft = activeLink.offsetLeft - 16;
      submenuList.scrollTo({
        left: scrollLeft,
        behavior: 'smooth'
      });
    };

    // Highlight link attivo in base allo scroll
    const highlightActiveLink = () => {
      const scrollPos = window.scrollY + getOffset() + 50;

      sections.forEach((section) => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.offsetHeight;
        const sectionId = section.getAttribute('id');

        if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
          submenuLinks.forEach((link) => {
            const wasActive = link.classList.contains('active');
            link.classList.remove('active');
            
            if (link.getAttribute('href') === `#${sectionId}`) {
              link.classList.add('active');
              if (!wasActive) {
                scrollSubmenuToActiveLink(link);
              }
            }
          });
        }
      });
    };

    window.addEventListener('scroll', highlightActiveLink);

    // Smooth scroll per i link del submenu
    submenuLinks.forEach((link) => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href');
        const targetSection = document.querySelector(targetId);
        if (targetSection) {
          const targetPosition = targetSection.offsetTop - getOffset();
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
          scrollSubmenuToActiveLink(link);
        }
      });
    });

    // Pre-fill evento from URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const eventoParam = urlParams.get('evento');
    if (eventoParam && eventoSelect) {
      // Mappa i parametri URL ai valori del select
      const eventoMap = {
        'compleanno': 'compleanno',
        'battesimo': 'battesimo',
        'comunione': 'comunione',
        'cresima': 'cresima',
        'cerimonia': 'battesimo', // Default a battesimo se generico
        'laurea': 'laurea',
        'anniversario': 'anniversario',
        'meeting': 'meeting',
        'altro': 'altro'
      };
      
      const selectValue = eventoMap[eventoParam] || eventoParam;
      eventoSelect.value = selectValue;
      // Aggiorna l'anteprima dopo il pre-fill
      updateOggettoPreview();
    }

    // Handle hash in URL for scrolling to section
    if (window.location.hash) {
      setTimeout(() => {
        const targetSection = document.querySelector(window.location.hash);
        if (targetSection) {
          const targetPosition = targetSection.offsetTop - getOffset();
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
        }
      }, 100);
    }

    // Data checkbox toggle
    if (dataCheckbox && dataInput) {
      dataCheckbox.addEventListener('change', () => {
        dataInput.disabled = dataCheckbox.checked;
        if (dataCheckbox.checked) {
          dataInput.value = '';
          dataInput.removeAttribute('required');
        } else {
          dataInput.setAttribute('required', 'required');
        }
      });
    }

    // Numero partecipanti checkbox toggle
    if (numeroCheckbox && partecipantiInput) {
      numeroCheckbox.addEventListener('change', () => {
        partecipantiInput.disabled = numeroCheckbox.checked;
        if (numeroCheckbox.checked) {
          partecipantiInput.value = '';
          partecipantiInput.removeAttribute('required');
        } else {
          partecipantiInput.setAttribute('required', 'required');
        }
      });
    }

    // Form submission - genera email con mailto: e redirect a thank you page
    const form = document.getElementById('preventivo-form');
    if (form) {
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Raccogli i dati del form
        const evento = document.getElementById('evento');
        const eventoText = evento.options[evento.selectedIndex].text;
        const eventoValue = evento.value;
        
        const dataInput = document.getElementById('data');
        const dataCheckbox = document.getElementById('data-da-definire');
        let dataText = dataCheckbox.checked ? 'Da definire' : dataInput.value;
        // Formatta la data in italiano se presente
        if (!dataCheckbox.checked && dataInput.value) {
          const d = new Date(dataInput.value);
          dataText = d.toLocaleDateString('it-IT', { day: '2-digit', month: '2-digit', year: 'numeric' });
        }
        
        const servizio = document.getElementById('servizio');
        const servizioText = servizio.options[servizio.selectedIndex].text;
        
        const partecipantiInput = document.getElementById('partecipanti');
        const numeroCheckbox = document.getElementById('numero-da-definire');
        const partecipantiText = numeroCheckbox.checked ? 'Da definire' : (partecipantiInput.value || 'Non specificato');
        
        const nome = document.getElementById('nome').value;
        const cognome = document.getElementById('cognome').value;
        const email = document.getElementById('email').value;
        const telefono = document.getElementById('telefono').value || 'Non specificato';
        const messaggio = document.getElementById('messaggio').value || 'Nessun messaggio aggiuntivo';
        
        // Genera l'oggetto email automatico
        const oggetto = `Richiesta Preventivo: ${eventoText} - ${dataText} - ${servizioText} - ${partecipantiText} persone`;
        
        // Genera il corpo email strutturato
        const corpoEmail = `
═══════════════════════════════════════════════════
   RICHIESTA PREVENTIVO - RISTORANTE PIZZERIA TRE
═══════════════════════════════════════════════════

DETTAGLI EVENTO:
────────────────────────────────────────────────────
• Tipo Evento:         ${eventoText}
• Data:                ${dataText}
• Servizio:            ${servizioText}
• N° Partecipanti:     ${partecipantiText}

DATI DI CONTATTO:
────────────────────────────────────────────────────
• Nome:                ${nome}
• Cognome:             ${cognome}
• Email:               ${email}
• Telefono:            ${telefono}

MESSAGGIO DEL CLIENTE:
────────────────────────────────────────────────────
${messaggio}

═══════════════════════════════════════════════════
Richiesta inviata dal sito web ristorantepizzeriatre.it
═══════════════════════════════════════════════════
`;

        // Indirizzi email destinatari
        const destinatari = 'info@ristorantepizzeriatre.it';
        
        // Determina la thank you page corretta in base all'evento
        const thankYouPages = {
          'compleanno': '/preventivo-compleanno/',
          'battesimo': '/preventivo-battesimo/',
          'comunione': '/preventivo-comunione/',
          'cresima': '/preventivo-cresima/',
          'laurea': '/preventivo-laurea/',
          'anniversario': '/preventivo-anniversario/',
          'meeting': '/preventivo-meeting/',
          'altro': '/contatti/' // Fallback
        };
        
        const thankYouPage = thankYouPages[eventoValue] || '/contatti/';
        
        // Crea il link mailto con oggetto e corpo
        const mailtoLink = `mailto:${destinatari}?subject=${encodeURIComponent(oggetto)}&body=${encodeURIComponent(corpoEmail)}`;
        
        // Apri il client email
        window.location.href = mailtoLink;
        
        // Redirect alla thank you page dopo un breve delay
        setTimeout(() => {
          const confirmed = confirm(
            'Si aprirà il tuo client email con la richiesta precompilata.\n\n' +
            'Clicca OK dopo aver inviato l\'email per vedere la pagina di conferma.\n\n' +
            'Se il client email non si apre automaticamente, contattaci a:\n' +
            'info@ristorantepizzeriatre.it\n' +
            'oppure chiamaci al: 039 990 9913'
          );
          
          if (confirmed) {
            window.location.href = thankYouPage;
          }
        }, 1000);
      });
    }
  });
</script>